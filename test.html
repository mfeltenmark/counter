<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Min Resa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .gradient-bg {
            background: linear-gradient(135deg, #FF6B35 0%, #FFA500 25%, #FFD700 50%, #9ACD32 75%, #4CAF50 100%);
            background-size: 400% 400%;
            animation: gradient-shift 15s ease infinite;
        }
        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen p-8">
    <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-3xl p-8 shadow-lg">
            <h1 class="text-3xl font-bold mb-4 text-gray-800">ðŸ§ª Test - VÃ¤lj datum</h1>

            <label for="start-date" class="block text-lg font-semibold mb-4 text-gray-800">
                ðŸ“… NÃ¤r bÃ¶rjade din resa?
            </label>
            <input
                type="date"
                id="start-date"
                class="w-full bg-gray-50 border-2 border-gray-200 rounded-xl px-4 py-3 mb-6 text-gray-800 text-lg"
            >
            <button
                id="calculate-btn"
                class="w-full bg-gradient-to-r from-orange-500 to-green-500 text-white py-4 rounded-xl font-bold text-lg"
            >
                ðŸŽ‰ TEST KNAPP
            </button>

            <div id="result" class="mt-6 p-4 bg-blue-50 rounded-lg hidden">
                <p class="text-xl font-bold" id="result-text">Resultat visas hÃ¤r</p>
            </div>

            <div id="debug" class="mt-4 p-4 bg-gray-100 rounded-lg text-sm">
                <p><strong>Debug info:</strong></p>
                <p id="debug-text">VÃ¤ntar pÃ¥ klick...</p>
            </div>
        </div>
    </div>

    <script>
        console.log("Script loaded!");

        const startDate = document.getElementById('start-date');
        const calcBtn = document.getElementById('calculate-btn');
        const result = document.getElementById('result');
        const resultText = document.getElementById('result-text');
        const debugText = document.getElementById('debug-text');

        // Set today as default
        const today = new Date().toISOString().split('T')[0];
        startDate.value = today;
        debugText.textContent = `Today: ${today}, Date picker: ${startDate.value}`;

        calcBtn.addEventListener('click', () => {
            console.log("Button clicked!");
            debugText.textContent = "Button clicked! Processing...";

            const selectedDate = startDate.value;
            console.log("Selected date:", selectedDate);

            if (!selectedDate) {
                alert('Inget datum valt!');
                debugText.textContent = "ERROR: No date selected";
                return;
            }

            // Calculate days
            const start = new Date(selectedDate);
            const now = new Date();
            const diffTime = Math.abs(now - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            console.log("Days:", diffDays);

            resultText.textContent = `ðŸŽ‰ ${diffDays} dagar stark! ðŸ’ª`;
            result.classList.remove('hidden');
            debugText.textContent = `SUCCESS! Date: ${selectedDate}, Days: ${diffDays}`;

            // Fire confetti
            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                console.log("Confetti fired!");
            } else {
                console.error("Confetti not loaded!");
                debugText.textContent += " | ERROR: Confetti not loaded";
            }
        });

        console.log("Event listener attached!");
    </script>
</body>
</html>
